<?xml version="1.0" encoding="utf-8"?>
<!-- <?xml-stylesheet type="text/xsl" href="follow.collector.xsl"?> -->
<page
    xmlns:x="http://www.yandex.ru/xscript"
    xmlns:xi="http://www.w3.org/2003/XInclude"
    xmlns:js="https://github.com/extensible/follow.js"
>

    <!-- Sample 1 -->
    <js:model name="user-data" dependency="jquery.ui modernizr" context="/page">
        <js:map chain="models.top" context="mx:component[@id='market:top-models']//model">
            <js:obj>
                <js:prop name="id" value="@id" type="number"/>
                <js:prop name="name" value="@name"/>
                <js:prop name="prices">
                    <js:map context="prices">
                        <js:prop value="@currency"/>
                        <js:prop value="@min"/>
                        <js:prop value="@max"/>
                    </js:map>
                </js:prop>
            </js:obj>
        </js:map>
        
        <js:obj chain="test" context="mx:component[@id='market:top-models']">
            <js:prop name="title" value="/page/@title"/>
            <js:prop name="id" value="mx:resource/@id"/>
            <js:prop name="key" value="generate-id(.)"/>
            <js:prop name="prices">
                <js:obj context="//model[test]/prices">
                    <js:prop name="currency" value="@currency"/>
                    <js:prop name="test" value="../test"/>
                    <js:prop name="values">
                        <js:obj>
                            <js:prop name="min" value="@min" type="number"/>
                            <js:prop name="max" value="@max" type="number"/>
                        </js:obj>
                    </js:prop>
                </js:obj>
            </js:prop>
        </js:obj>
    </js:model>
    
    <!-- Sample 2 -->
    <hello title="world">
        <js:model context="..">
            <js:map chain="other" context="test">
                <js:prop value="@title"/>
                <js:obj context="..">
                    <js:prop name="id" value="generate-id()"/>
                    <js:prop name="title" value="@title"/>
                </js:obj>
                <js:prop value="/page/@title"/>
            </js:map>
        </js:model>
        <test title="Yo!"/>
    </hello>

    <!-- Sample 3 -->
    <js:model name="b-gallery" is-module="true" dependency="jsrender">
        
        <js:obj chain="params">
            <js:prop name="css_selector" value="string('.b_gallery_trigger')"/>
        </js:obj>
    
        <js:map chain="gallery" context="../images/ya_guru_modelcard">
            <js:obj>
                <js:prop name="title" value="title"/>
                <js:prop name="images">
                    <js:map context=".//big_picture">
                        <js:obj>
                            <js:prop name="url">
                                <js:obj>
                                    <js:prop name="normal" value="normalize-space(.)"/>
                                    <js:prop name="small" value="concat(normalize-space(.), '&amp;size=1')"/>
                                </js:obj>
                            </js:prop>
                            <js:prop name="width" value="@SizeX"/>
                            <js:prop name="height" value="@SizeY"/>
                        </js:obj>
                    </js:map>
                </js:prop>
            </js:obj>
        </js:map>
        
    </js:model>

</page>